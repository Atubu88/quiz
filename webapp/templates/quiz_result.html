<div id="quiz-body" class="quiz-step">
  {% if last_question %}
    <div class="quiz-progress">–í–æ–ø—Ä–æ—Å {{ last_question_index or 1 }} –∏–∑ {{ total_questions }}</div>
    <h2 class="quiz-question-title">{{ last_question.text }}</h2>
    {% if last_question.options %}
      <div class="quiz-options">
        {% for option in last_question.options %}
          {% set is_selected = selected_option_id is not none and option.id == selected_option_id %}
          {% set is_correct_option = last_question.correct_option_id is not none and option.id == last_question.correct_option_id %}
          <button
            type="button"
            class="option-button is-disabled{% if is_correct_option %} is-correct{% endif %}{% if is_selected and not is_correct_option %} is-incorrect{% endif %}"
            disabled
          >
            <span class="option-index">{{ loop.index }}</span>
            <span class="option-text">{{ option.text }}</span>
          </button>
        {% endfor %}
      </div>
    {% endif %}
    {% if is_correct is not none %}
      <div class="answer-feedback{% if is_correct %} is-correct{% else %} is-incorrect{% endif %}">
        {% if is_correct %}
          üëç –í–µ—Ä–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü.
        {% else %}
          ‚ùå –ù–µ–≤–µ—Ä–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑.
        {% endif %}
      </div>
    {% endif %}
    {% if last_question.explanation %}
      <p class="explanation">{{ last_question.explanation }}</p>
    {% endif %}
  {% endif %}

  <div class="quiz-summary">
    <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç</h3>
    <p>–í—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞ {{ correct_count }} –∏–∑ {{ total_questions }} –≤–æ–ø—Ä–æ—Å–æ–≤.</p>
    <button
      type="button"
      class="back-to-categories"
      hx-get="/"
      hx-target="#content"
      hx-push-url="true"
      hx-indicator=".htmx-indicator"
    >
      –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
    </button>
  </div>
</div>
